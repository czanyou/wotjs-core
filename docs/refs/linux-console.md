# Console

## 终端

在终端或仿真器中输入下面的代码，并回车，预览最直接的效果。

```shell
echo  -e "\033[1;31mI ♡  You \e[0m"
```

> 请注意，引号内的\e等同于\033；\033、\x1b和\e效果是一样，对应键盘左上角Esc键对应的ASCII码（8进制）；

## 颜色


常用颜色

```shell
# 格式：\033[显示方式;前景色;背景色m
 
# 说明：
前景色            背景色           颜色
---------------------------------------
30                40              黑色
31                41              红色
32                42              绿色
33                43              黃色
34                44              蓝色
35                45              紫红色
36                46              青蓝色
37                47              白色
 
显示方式           意义
-------------------------
0                终端默认设置
1                高亮显示
4                使用下划线
5                闪烁
7                反白显示
8                不可见
 
# 例子：
\033[1;31;40m    <!--1-高亮显示 31-前景色红色  40-背景色黑色-->
\033[0m          <!--采用终端默认设置，即取消颜色设置-->
```

## setconsole

可用来指定系统终端。

setconsole [serial][ttya][ttyb]

- serial 　使用PROM终端。
- ttya,cua0 或 ttyS0 　使用第１个串口设备作为终端。
- ttyb,cua1 或 ttyS1 　使用第２个串口设备作为终端。
- video 　使用主机上的显卡作为终端。

### /dev/console

https://zhuanlan.zhihu.com/p/632099551

/dev/tty文件是一个特殊的文件，代表当前进程的终端，它显示与当前 SSH 会话关联的终端。

/dev/tty[0-N]只是一个虚拟控制台，如果您运行的是N代表TTY号码的 GUI 系统，您可以从主终端切换到它。默认情况下，/dev/tty0是默认的虚拟控制台。

/dev/console被称为系统控制台，引导和内核消息在引导过程中显示在这个控制台上。与它Linux 设备文件其一样，它位于/dev目录中。

串行端口终端(/dev/ttySn)

串行端口终端(Serial Port Terminal)是使用计算机串行端口连接的终端设备。计算机把每个串行端口都看作是一个字符设备。有段时间这些串行端口设备通常被称为终端设备，因为那时它的最大用途就是用来连接终端。这些串行端口所对应的设备名称是/dev/tts/0(或/dev/ttyS0), /dev/tts/1(或/dev/ttyS1)等，设备号分别是(4,0), (4,1)等，分别对应于DOS系统下的COM1、COM2等。若要向一个端口发送数据，可以在命令行上把标准输出重定向到这些特殊文件名上即可。例如，在命令行提示符下键入：echo test > /dev/ttyS1会把单词”test”发送到连接在ttyS1(COM2)端口的设备上。可接串口来实验。

伪终端(/dev/pty/)

伪终端(Pseudo Terminal)是成对的逻辑终端设备(即master和slave设备, 对master的操作会反映到slave上)。

例如/dev/ptyp3和/dev/ttyp3(或者在设备文件系统中分别是/dev/pty/m3和 /dev/pty/s3)。它们与实际物理设备并不直接相关。如果一个程序把ptyp3(master设备)看作是一个串行端口设备，则它对该端口的读/ 写操作会反映在该逻辑终端设备对应的另一个ttyp3(slave设备)上面。而ttyp3则是另一个程序用于读写操作的逻辑设备。


但Linux系统上的Unix98并不使用上述方法，而使用了”pty master”方式，例如/dev/ptm3。它的对应端则会被自动地创建成/dev/pts/3。这样就可以在需要时提供一个pty伪终端。目录 /dev/pts是一个类型为devpts的文件系统，并且可以在被加载文件系统列表中看到。虽然“文件”/dev/pts/3看上去是设备文件系统中的一项，但其实它完全是一种不同的文件系统。

即: TELNET ---> TTYP3(S3: slave) ---> PTYP3(M3: master) ---> GETTY

A：tty 设备包括虚拟控制台，串口以及伪终端设备。

/dev/tty 代表当前tty设备，在当前的终端中输入 echo "hello"> /dev/tty ，都会直接显示在当前的终端中。

Q:/dev/ttyS*是什么？

A:/dev/ttyS*是串行终端设备。

Q:/dev/pty*是什么？

A:/dev/pty*即伪终端，所谓伪终端是逻辑上的终端设备，多用于模拟终端程序。例如，我们在X Window下打开的终端，以及我们在 Windows 使用 telnet 或 ssh 等方式登录 Linux 主机，此时均在使用pty设备(准确的说应该pty从设备)。

Q：/dev/tty0 与 /dev/tty1 …/dev/tty63 是什么？它们之间有什么区别？

A：/dev/tty0 代表当前虚拟控制台，而 /dev/tty1 等代表第一个虚拟控制台，例如当使用 ALT+F2 进行切换时，系统的虚拟控制台为 /dev/tty2 ，当前的控制台则指向 /dev/tty2

Q：如何确定当前所在的终端（或控制台）？

A：使用 tty 命令可以确定当前的终端或者控制台。

Q：/dev/console 是到 /dev/tty0 的符号链接吗？

A: 目前的大多数文本中都称 /dev/console 是到 /dev/tty0 的链接（包括《Linux内核源代码情景分析》），但是这样说是不确切的。根据内核文档，在2.1.71之前，/dev/console 根据不同系统的设定可以链接到 /dev/tty0 或者其他 tty＊ 上，在 2.1.71 版本之后则完全由内核控制。目前，只有在单用户模式下可以登录 /dev/console（可以在单用户模式下输入tty命令进行确认）。

Q：/dev/tty0 与 /dev/fb* 有什么区别？

A: 在 Framebuffer 设备没有启用的系统中，可以使用 /dev/tty0 访问显卡。


# Linux 定时任务

## cron

表 1 crontab 命令常用选项及功能

| 选项    | 功能                                                                                                              |
| ------- | ----------------------------------------------------------------------------------------------------------------- |
| -u user | 用来设定某个用户的 crontab 服务，例如 "-u demo" 表示设备 demo 用户的 crontab 服务，此选项一般有 root 用户来运行。 |
| -e      | 编辑某个用户的 crontab 文件内容。如果不指定用户，则表示编辑当前用户的 crontab 文件。                              |
| -l      | 显示某用户的 crontab 文件内容，如果不指定用户，则表示显示当前用户的 crontab 文件内容。                            |
| -r      | 从 /var/spool/cron 删除某用户的 crontab 文件，如果不指定用户，则默认删除当前用户的 crontab 文件。                 |
| -i      | 在删除用户的 crontab 文件时，给确认提示。                                                                         |

## 定时任务的配置文件

> /etc/crontab

```shell
min hour day month weekday cmdline
```

## 定时任务编写文件

- crontab -e ： 编辑定时任务（用户可以省略，默认是当前用户）
- crontab -l ： 查看定时任务（只查看当前用户的定时任务）


cat /var/spool/cron/crontabs/root

## 定时任务的日志

> /var/log/cron : 可以查看到执行那些定时任务

> /var/log/messages: 记录系统操作的日志，（例如：用户登录）


## 案例

案例1：要求每分钟执行一次

> * * * * *

案例2：要求每天的凌晨3点执行一次

> 0 3 * * *

案例3：要求每天上午7,9,12点各执行一次

> 0 7,9,12 * * *

案例4：要求每个季度执行一次

> 0 3 1 1,4,7,10 *

案例5：要求在每天上午的7点每隔2分钟执行一次（0分钟的时候执行）

> 0/2 7 * * *


案例6：要求每个月的1号的星期一执行一次

> 0 0 1 * 1

案例7：要求每天的8 - 11点每隔5分钟执行一次

> */5 8,9,10,11 * * *

或者

> */5 8-11 * * *

案例8：要求每天的21点到凌晨3点，每个5分钟执行一次

> */5 21-3 * * *

或者

> */5 21-23,0-3 * * *

案例9：要求每天上7点开始，每隔两分钟执行一次

> */2 7-23 * * *

案例10：要求每天上7点开始，每隔两小时的两分钟执行一次

> */2 7-23/2 * * *

案例11：要求工作日（1-5）的7点和下午两点执行一次

> 0 7,14 * * 1,2,3,4,5